{"ast":null,"code":"import { __awaiter, __extends, __generator } from \"tslib\";\nimport { FaceDetection } from '../classes';\nimport { BOX_ANCHORS, BOX_ANCHORS_SEPARABLE, DEFAULT_MODEL_NAME, DEFAULT_MODEL_NAME_SEPARABLE_CONV, IOU_THRESHOLD, MEAN_RGB_SEPARABLE } from './const';\nimport { TinyYolov2Base } from './TinyYolov2Base';\nvar TinyYolov2 = /** @class */function (_super) {\n  __extends(TinyYolov2, _super);\n  function TinyYolov2(withSeparableConvs) {\n    if (withSeparableConvs === void 0) {\n      withSeparableConvs = true;\n    }\n    var _this = this;\n    var config = Object.assign({}, {\n      withSeparableConvs: withSeparableConvs,\n      iouThreshold: IOU_THRESHOLD,\n      classes: ['face']\n    }, withSeparableConvs ? {\n      anchors: BOX_ANCHORS_SEPARABLE,\n      meanRgb: MEAN_RGB_SEPARABLE\n    } : {\n      anchors: BOX_ANCHORS,\n      withClassScores: true\n    });\n    _this = _super.call(this, config) || this;\n    return _this;\n  }\n  Object.defineProperty(TinyYolov2.prototype, \"withSeparableConvs\", {\n    get: function () {\n      return this.config.withSeparableConvs;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TinyYolov2.prototype, \"anchors\", {\n    get: function () {\n      return this.config.anchors;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  TinyYolov2.prototype.locateFaces = function (input, forwardParams) {\n    return __awaiter(this, void 0, void 0, function () {\n      var objectDetections;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.detect(input, forwardParams)];\n          case 1:\n            objectDetections = _a.sent();\n            return [2 /*return*/, objectDetections.map(function (det) {\n              return new FaceDetection(det.score, det.relativeBox, {\n                width: det.imageWidth,\n                height: det.imageHeight\n              });\n            })];\n        }\n      });\n    });\n  };\n  TinyYolov2.prototype.getDefaultModelName = function () {\n    return this.withSeparableConvs ? DEFAULT_MODEL_NAME_SEPARABLE_CONV : DEFAULT_MODEL_NAME;\n  };\n  TinyYolov2.prototype.extractParamsFromWeigthMap = function (weightMap) {\n    return _super.prototype.extractParamsFromWeigthMap.call(this, weightMap);\n  };\n  return TinyYolov2;\n}(TinyYolov2Base);\nexport { TinyYolov2 };","map":{"version":3,"mappings":";AAEA,SAASA,aAAa,QAAe,YAAY;AAGjD,SACEC,WAAW,EACXC,qBAAqB,EACrBC,kBAAkB,EAClBC,iCAAiC,EACjCC,aAAa,EACbC,kBAAkB,QACb,SAAS;AAChB,SAASC,cAAc,QAAQ,kBAAkB;AAIjD;EAAgCC;EAE9B,oBAAYC,kBAAkC;IAAlC;MAAAA,yBAAkC;IAAA;IAA9C;IACE,IAAMC,MAAM,GAAGC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE;MAC/BH,kBAAkB;MAClBI,YAAY,EAAER,aAAa;MAC3BS,OAAO,EAAE,CAAC,MAAM;KACjB,EACDL,kBAAkB,GACd;MACAM,OAAO,EAAEb,qBAAqB;MAC9Bc,OAAO,EAAEV;KACV,GACC;MACAS,OAAO,EAAEd,WAAW;MACpBgB,eAAe,EAAE;KAClB,CACF;IAEDC,0BAAMR,MAAM,CAAC;;EACf;EAEAC,sBAAWQ,0CAAkB;SAA7B;MACE,OAAO,IAAI,CAACT,MAAM,CAACD,kBAAkB;IACvC,CAAC;;;;EAEDE,sBAAWQ,+BAAO;SAAlB;MACE,OAAO,IAAI,CAACT,MAAM,CAACK,OAAO;IAC5B,CAAC;;;;EAEYI,gCAAW,GAAxB,UAAyBC,KAAgB,EAAEC,aAAiC;;;;;;YACjD,qBAAM,IAAI,CAACC,MAAM,CAACF,KAAK,EAAEC,aAAa,CAAC;;YAA1DE,gBAAgB,GAAGC,SAAuC;YAChE,sBAAOD,gBAAgB,CAACE,GAAG,CAAC,aAAG;cAAI,WAAIzB,aAAa,CAAC0B,GAAG,CAACC,KAAK,EAAED,GAAG,CAACE,WAAW,EAAE;gBAAEC,KAAK,EAAEH,GAAG,CAACI,UAAU;gBAAEC,MAAM,EAAEL,GAAG,CAACM;cAAW,CAAE,CAAC;YAAjG,CAAiG,CAAC;QAAA;;;GACtI;EAESb,wCAAmB,GAA7B;IACE,OAAO,IAAI,CAACV,kBAAkB,GAAGL,iCAAiC,GAAGD,kBAAkB;EACzF,CAAC;EAESgB,+CAA0B,GAApC,UAAqCc,SAA4B;IAC/D,OAAOC,iBAAMC,0BAA0B,YAACF,SAAS,CAAC;EACpD,CAAC;EACH,iBAAC;AAAD,CAAC,CA1C+B1B,cAAc","names":["FaceDetection","BOX_ANCHORS","BOX_ANCHORS_SEPARABLE","DEFAULT_MODEL_NAME","DEFAULT_MODEL_NAME_SEPARABLE_CONV","IOU_THRESHOLD","MEAN_RGB_SEPARABLE","TinyYolov2Base","__extends","withSeparableConvs","config","Object","assign","iouThreshold","classes","anchors","meanRgb","withClassScores","_this","TinyYolov2","input","forwardParams","detect","objectDetections","_a","map","det","score","relativeBox","width","imageWidth","height","imageHeight","weightMap","_super","extractParamsFromWeigthMap"],"sources":["../../../src/tinyYolov2/TinyYolov2.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}